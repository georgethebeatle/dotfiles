---
- hosts: all
  tasks:
  - name: update brew
    homebrew: update_homebrew=yes

  - name: add Homebrew taps
    homebrew_tap: name={{item}}
    with_items:
    - homebrew/cask-fonts
    - cloudfoundry/tap
    - git-duet/tap
    - neovim/neovim

  - name: install Homebrew packages
    homebrew:
      name:
      - ack
      - ag
      - akshaymankar/tap/dhall-fly
      - awscli
      - bash
      - bash-completion@2
      - bosh-cli
      - cf-cli
      - chruby
      - coreutils
      - ctags
      - curl
      - dhall
      - dhall-bash
      - dhall-json
      - direnv
      - docker
      - docker-machine
      - fasd
      - fortune
      - fzf
      - gcc
      - git
      - git-duet
      - gnu-tar
      - go
      - golangci/tap/golangci-lint
      - htop
      - jq
      - jsonpp
      - kubectl
      - kubernetes-helm
      - lastpass-cli
      - libgit2
      - neovim
      - npm
      - pass
      - pstree
      - python3
      - python@2
      - ripgrep
      - ruby-install
      - shellcheck
      - ssh-copy-id
      - terraform
      - tig
      - tmate
      - tmux
      - tree
      - vim
      - watch
      - wget
      - yarn
      - zsh
      state: latest

  - name: install Homebrew casks
    homebrew_cask: name={{item}} install_options=appdir=/Applications
    with_items:
    - docker
    - flycut
    - font-inconsolata
    - font-inconsolata-nerd-font
    - google-cloud-sdk
    - gpg-suite
    - iterm2
    - ngrok
    - shiftit

  - name: install neovim pip package
    pip: name=neovim state=latest

  - name: install neovim pip3 package
    pip: name=neovim state=latest executable=/usr/local/bin/pip3
